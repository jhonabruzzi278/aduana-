---
import BaseLayout from "../layouts/BaseLayout.astro";

import FormularioPasajero from "../components/FormularioPasajero.astro";
import FormularioSalidaPasajero from "../components/FormularioSalidaPasajero.astro";
import FormularioVehiculo from "../components/FormularioVehiculo.astro";
import FormularioMenor from "../components/FormularioMenor.astro";
import ValidacionesAutomaticas from "../components/ValidacionesAutomaticas.astro";
import IntegracionPDI from "../components/IntegracionPDI.astro";
import IntegracionSAG from "../components/IntegracionSAG.astro";
import IntegracionMigraciones from "../components/IntegracionMigraciones.astro";
import IntegracionAduanaArgentina from "../components/IntegracionAduanaArgentina.astro";
import IntervencionTramite from "../components/IntervencionTramite.astro";
import MapaPaso from "../components/MapaPaso.astro";
---

<BaseLayout title="Funcionario - Aduana">
  <h2 class="text-2xl font-bold mb-2 text-blue-900">Bienvenido Funcionario</h2>
  <p class="mb-6 text-gray-700">Gestione ingresos, salidas e intervenciones sobre los tr√°mites.</p>

  <!-- üß© Grid estilo Bento -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
      <FormularioPasajero />
    </div>
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
      <FormularioSalidaPasajero />
    </div>
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
      <FormularioVehiculo />
    </div>
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
      <FormularioMenor />
    </div>
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
      <ValidacionesAutomaticas />
    </div>
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
      <IntervencionTramite />
    </div>
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
      <IntegracionPDI />
    </div>
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
      <IntegracionSAG />
    </div>
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
      <IntegracionMigraciones />
    </div>
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition">
      <IntegracionAduanaArgentina />
    </div>
    <div class="bg-white p-4 rounded shadow hover:shadow-lg transition col-span-full">
      <MapaPaso />
    </div>
  </div>
</BaseLayout>

<!-- üîê Validaci√≥n de rol + carga de scripts JS -->
<script type="module">
  window.addEventListener("DOMContentLoaded", () => {
    const rolEsperado = "funcionario";
    const actual = localStorage.getItem("rol");

    if (actual !== rolEsperado) {
      window.location.href = "/funcionario";
      return;
    }

    import("/scripts/formularioPasajeroEntrada.js").then((m) => m.setupFormulario());
    import("/scripts/formularioPasajeroSalida.js").then((m) => m.setupFormulario());
    import("/scripts/formularioVehiculo.js").then((m) => m.setupFormulario());
    import("/scripts/formularioMenor.js").then((m) => m.setupFormularioMenor());
    import("/scripts/formularioIntervencion.js").then((m) => m.setupFormulario());
    import("/scripts/formularioIntegracionSAG.js").then((m) => m.setupFormulario());
  });
</script>
