---
import BaseLayout from '../layouts/BaseLayout.astro';

import FormularioPasajero from '../components/FormularioPasajero.astro';
import FormularioSalidaPasajero from '../components/FormularioSalidaPasajero.astro';
import FormularioVehiculo from '../components/FormularioVehiculo.astro';
import IntervencionTramite from '../components/IntervencionTramite.astro';
import ValidacionesAutomaticas from '../components/ValidacionesAutomaticas.astro';
import IntegracionSAG from '../components/IntegracionSAG.astro';
import IntegracionPDI from '../components/IntegracionPDI.astro';
import IntegracionMigraciones from '../components/IntegracionMigraciones.astro';
import IntegracionAduanaArgentina from '../components/IntegracionAduanaArgentina.astro';
---

<BaseLayout title="Funcionario - Aduana">
  <h2 class="text-2xl font-bold mb-6">👮 Panel del Funcionario</h2>
  <p class="mb-8 text-gray-700">Gestiona trámites de ingreso, salida, validaciones y conexiones externas desde aquí.</p>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    
    <!-- Bloque 1: Ingreso -->
    <section class="bg-blue-50 p-4 rounded-lg shadow hover:shadow-md transition">
      <h3 class="text-lg font-semibold text-blue-800 mb-2">📥 Registro de Ingreso</h3>
      <FormularioPasajero />
    </section>

    <!-- Bloque 2: Vehículo -->
    <section class="bg-yellow-50 p-4 rounded-lg shadow hover:shadow-md transition">
      <h3 class="text-lg font-semibold text-yellow-700 mb-2">🚗 Registro de Vehículo</h3>
      <FormularioVehiculo />
    </section>

    <!-- Bloque 3: Salida -->
    <section class="bg-green-50 p-4 rounded-lg shadow hover:shadow-md transition">
      <h3 class="text-lg font-semibold text-green-800 mb-2">🚪 Registro de Salida</h3>
      <FormularioSalidaPasajero />
    </section>

    <!-- Bloque 4: Validaciones automáticas -->
    <section class="bg-indigo-50 p-4 rounded-lg shadow hover:shadow-md transition">
      <h3 class="text-lg font-semibold text-indigo-800 mb-2">🧠 Validaciones Automáticas</h3>
      <ValidacionesAutomaticas />
    </section>

    <!-- Bloque 5: Intervención -->
    <section class="bg-red-50 p-4 rounded-lg shadow hover:shadow-md transition col-span-1 md:col-span-2">
      <h3 class="text-lg font-semibold text-red-800 mb-2">🛠️ Intervención Manual</h3>
      <IntervencionTramite />
    </section>

    <!-- Bloque 6: Integraciones Externas -->
    <section class="bg-gray-100 p-4 rounded-lg shadow hover:shadow-md transition col-span-1 md:col-span-2">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">🌐 Integraciones Externas</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <IntegracionPDI />
        <IntegracionSAG />
        <IntegracionMigraciones />
        <IntegracionAduanaArgentina />
      </div>
    </section>

  </div>
</BaseLayout>

<script type="module">
  window.onload = () => {
    const rolEsperado = "funcionario";
    const actual = localStorage.getItem("rol");

    if (actual !== rolEsperado) {
      window.location.href = "/";
    }
  };
</script>
